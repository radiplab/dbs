<!DOCTYPE html>
<html>
<!--
Example URL: http://localhost:1024/viewer.html?input=dicom%2F0000539%2FCT.zip
Example URL: http://localhost/viewer.html?input=dicom%2F0000539%2FCT.zip
http://localhost/dwv-simplistic/viewer.html?input=dicom%2F0000539%2FCT.zip
-->
<head>
<title>DICOM Web Viewer</title>
<meta charset="UTF-8">
<meta name="description" content="Simplistic viewer using DICOM Web Viewer (DWV).">
<meta name="keywords" content="DICOM,HTML5,JavaScript,medical,imaging,DWV">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<link rel="icon" type="image/x-icon" href="favicon.ico">
<meta name="theme-color" content="#f86a2d"/>
<link rel="manifest" href="manifest.json">
<link type="text/css" rel="stylesheet" href="css/style.css" />
<!-- mobile web app -->
<meta name="mobile-web-app-capable" content="yes" />
<link rel="shortcut icon" sizes="16x16" href="resources/icons/icon-16.png" />
<link rel="shortcut icon" sizes="32x32" href="resources/icons/icon-32.png" />
<link rel="shortcut icon" sizes="64x64" href="resources/icons/icon-64.png" />
<link rel="shortcut icon" sizes="128x128" href="resources/icons/icon-128.png" />
<link rel="shortcut icon" sizes="256x256" href="resources/icons/icon-256.png" />
<!-- apple specific -->
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<link rel="apple-touch-icon" sizes="16x16" href="resources/icons/icon-16.png" />
<link rel="apple-touch-icon" sizes="32x32" href="resources/icons/icon-32.png" />
<link rel="apple-touch-icon" sizes="64x64" href="resources/icons/icon-64.png" />
<link rel="apple-touch-icon" sizes="128x128" href="resources/icons/icon-128.png" />
<link rel="apple-touch-icon" sizes="256x256" href="resources/icons/icon-256.png" />
<!-- Third party (dwv) -->
<script type="text/javascript" src="node_modules/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="node_modules/konva/konva.min.js"></script>
<!-- decoders -->
<script type="text/javascript" src="node_modules/dwv/decoders/dwv/rle.js"></script>
<script type="text/javascript" src="node_modules/dwv/decoders/pdfjs/jpx.js"></script>
<script type="text/javascript" src="node_modules/dwv/decoders/pdfjs/util.js"></script>
<script type="text/javascript" src="node_modules/dwv/decoders/pdfjs/arithmetic_decoder.js"></script>
<script type="text/javascript" src="node_modules/dwv/decoders/pdfjs/jpg.js"></script>
<script type="text/javascript" src="node_modules/dwv/decoders/rii-mango/lossless-min.js"></script>
<!-- dwv -->
<script type="text/javascript" src="node_modules/dwv/dist/dwv.min.js"></script>
<!-- gui -->
<script type="text/javascript" src="src/gui/dropboxLoader.js"></script>

<!-- Launch the app -->
<script type="text/javascript" src="src/register-sw.js"></script>
<script type="text/javascript" src="src/appgui.js"></script>
<script type="text/javascript" src="src/applauncher.js"></script>

<script>
// Prevent scrolling on touch devices
document.addEventListener('touchmove', function(event) {
  event.preventDefault();
}, { passive: false });

document.addEventListener('DOMContentLoaded', function() {
    // Function to get the value of a specific query parameter
    function getQueryParam(param) {
        var queryString = window.location.search; // Get the full query string from the URL
        var urlParams = new URLSearchParams(queryString); // Use URLSearchParams to handle the parameters
        return urlParams.get(param); // Get the specific parameter
    }

    // Get the legend text from URL
    var legendText = getQueryParam('legend'); // Get the 'legend' parameter

    // Decode the legend text if it exists
    if (legendText) {
        legendText = decodeURIComponent(legendText);

        // Find the div with ID 'legend' and set its content
        var legendDiv = document.getElementById('legend');
        if (legendDiv) {
            legendDiv.textContent = legendText; // Set the text content of the div
        }
    }
});

</script>
<style>
html, body {
  overflow: hidden; /* This prevents scrolling and hides the scrollbar */
  height: 100%; /* This restricts the height to the viewport */
}
</style>

</head>

<body>
<span id="dwvVersion" style="display: none;"></span>
<!-- DWV -->
<div id="dwv-simpl0" class="dwv">

  <!-- Toolbar -->
  <div id="toolbar-simpl0" class="toolbar"></div>

  <!-- Layer Container -->
  <div id="layerGroup-simpl0" class="layerGroup">
    <div id="dropBox"></div>
  </div>

  <div id="legend" class="legend">
  </div>

</div><!-- /dwv -->

</body>
</html>
